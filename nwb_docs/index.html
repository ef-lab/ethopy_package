
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python Boilerplate contains all the boilerplate you need to create a Python package.">
      
      
        <meta name="author" content="olakiril, alexevag">
      
      
        <link rel="canonical" href="https://ef-lab.github.io/ethopy_package/nwb_docs/">
      
      
        <link rel="prev" href="../database_schemas/">
      
      
        <link rel="next" href="../API/logger/">
      
      
      <link rel="icon" href="../assets/EthoPy_logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Export to NWB - EthoPy</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRegular:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Google Sans";--md-code-font:"Regular"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nwb-export-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="EthoPy" class="md-header__button md-logo" aria-label="EthoPy" data-md-component="logo">
      
  <img src="../assets/EthoPy_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EthoPy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Export to NWB
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ef-lab/ethopy_package" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../getting_started/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../API/logger/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://github.com/ef-lab/ethopy_package/issues" class="md-tabs__link">
        
  
  
    
  
  Report Issues

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../troubleshooting/" class="md-tabs__link">
        
  
  
    
  
  Troubleshooting

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="EthoPy" class="md-nav__button md-logo" aria-label="EthoPy" data-md-component="logo">
      
  <img src="../assets/EthoPy_logo.png" alt="logo">

    </a>
    EthoPy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ef-lab/ethopy_package" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../local_conf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Local Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating_custom_components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../match_port_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Experiment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dot_stimulus_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stimulus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi_port_behavior_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Behavior
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../task_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup_configuration_idx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup Configuration Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Experiment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Database
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            Database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database_schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database Organization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Export to NWB
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Export to NWB
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Main Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Main Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#export_to_nwb" class="md-nav__link">
    <span class="md-ellipsis">
      export_to_nwb()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="export_to_nwb()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Required Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Optional Parameters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Optional Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nwb-file-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      NWB File Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subject-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Subject Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-options" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-export" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Export
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-with-custom-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Export with Custom Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Configuration File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-nwb-object-for-further-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Return NWB Object for Further Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch-export" class="md-nav__link">
    <span class="md-ellipsis">
      Batch Export
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameter-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter Guidelines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parameter Guidelines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#age-format-iso-8601-duration" class="md-nav__link">
    <span class="md-ellipsis">
      Age Format (ISO 8601 Duration)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sex-values" class="md-nav__link">
    <span class="md-ellipsis">
      Sex Values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-included-in-nwb-files" class="md-nav__link">
    <span class="md-ellipsis">
      Data Included in NWB Files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Included in NWB Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-data" class="md-nav__link">
    <span class="md-ellipsis">
      Core Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experimental-data" class="md-nav__link">
    <span class="md-ellipsis">
      Experimental Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-features" class="md-nav__link">
    <span class="md-ellipsis">
      Special Features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-features" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compound-stimulus-support" class="md-nav__link">
    <span class="md-ellipsis">
      Compound Stimulus Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robust-trial-timing" class="md-nav__link">
    <span class="md-ellipsis">
      Robust Trial Timing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Output File Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output File Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#processing-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Processing Modules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-nwb-components" class="md-nav__link">
    <span class="md-ellipsis">
      Core NWB Components
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Data Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Related Functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/logger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logger Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/behavior/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Behavior Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/experiment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Experiment Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interface Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/stimulus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stimulus Module
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/ef-lab/ethopy_package/issues" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Report Issues
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Main Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Main Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#export_to_nwb" class="md-nav__link">
    <span class="md-ellipsis">
      export_to_nwb()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="export_to_nwb()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Required Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Optional Parameters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Optional Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nwb-file-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      NWB File Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subject-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Subject Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-options" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-export" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Export
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-with-custom-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Export with Custom Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Configuration File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-nwb-object-for-further-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Return NWB Object for Further Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch-export" class="md-nav__link">
    <span class="md-ellipsis">
      Batch Export
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameter-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter Guidelines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parameter Guidelines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#age-format-iso-8601-duration" class="md-nav__link">
    <span class="md-ellipsis">
      Age Format (ISO 8601 Duration)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sex-values" class="md-nav__link">
    <span class="md-ellipsis">
      Sex Values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-included-in-nwb-files" class="md-nav__link">
    <span class="md-ellipsis">
      Data Included in NWB Files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Included in NWB Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-data" class="md-nav__link">
    <span class="md-ellipsis">
      Core Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experimental-data" class="md-nav__link">
    <span class="md-ellipsis">
      Experimental Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-features" class="md-nav__link">
    <span class="md-ellipsis">
      Special Features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-features" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compound-stimulus-support" class="md-nav__link">
    <span class="md-ellipsis">
      Compound Stimulus Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robust-trial-timing" class="md-nav__link">
    <span class="md-ellipsis">
      Robust Trial Timing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Output File Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output File Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#processing-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Processing Modules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-nwb-components" class="md-nav__link">
    <span class="md-ellipsis">
      Core NWB Components
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Data Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Related Functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  


  
  


<h1 id="nwb-export-documentation">NWB Export Documentation<a class="headerlink" href="#nwb-export-documentation" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The NWB export module provides functionality to export experimental data from Ethopy DataJoint tables to NWB (Neurodata Without Borders) format files. This documentation covers the main export functions and their usage.</p>
<h2 id="main-functions">Main Functions<a class="headerlink" href="#main-functions" title="Permanent link">&para;</a></h2>
<h3 id="export_to_nwb"><code>export_to_nwb()</code><a class="headerlink" href="#export_to_nwb" title="Permanent link">&para;</a></h3>
<p>The primary function for exporting a single experimental session to NWB format.</p>
<h4 id="required-parameters">Required Parameters<a class="headerlink" href="#required-parameters" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>animal_id</code></td>
<td><code>int</code></td>
<td>Unique identifier for the animal</td>
</tr>
<tr>
<td><code>session_id</code></td>
<td><code>int</code></td>
<td>Session identifier</td>
</tr>
</tbody>
</table>
<h4 id="optional-parameters">Optional Parameters<a class="headerlink" href="#optional-parameters" title="Permanent link">&para;</a></h4>
<h5 id="nwb-file-parameters">NWB File Parameters<a class="headerlink" href="#nwb-file-parameters" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>experimenter</code></td>
<td><code>str</code></td>
<td><code>"Unknown"</code></td>
<td>Name of the experimenter</td>
</tr>
<tr>
<td><code>lab</code></td>
<td><code>str</code></td>
<td><code>"Your Lab Name"</code></td>
<td>Laboratory name</td>
</tr>
<tr>
<td><code>institution</code></td>
<td><code>str</code></td>
<td><code>"Your Institution"</code></td>
<td>Institution name</td>
</tr>
<tr>
<td><code>session_description</code></td>
<td><code>str</code></td>
<td>Auto-generated</td>
<td>Description of the experimental session</td>
</tr>
</tbody>
</table>
<h5 id="subject-parameters">Subject Parameters<a class="headerlink" href="#subject-parameters" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>age</code></td>
<td><code>str</code></td>
<td><code>"Unknown"</code></td>
<td>Age in ISO 8601 duration format</td>
</tr>
<tr>
<td><code>subject_description</code></td>
<td><code>str</code></td>
<td><code>"laboratory mouse"</code></td>
<td>Description of the subject</td>
</tr>
<tr>
<td><code>species</code></td>
<td><code>str</code></td>
<td><code>"Unknown"</code></td>
<td>Species of the subject</td>
</tr>
<tr>
<td><code>sex</code></td>
<td><code>str</code></td>
<td><code>"U"</code></td>
<td>Sex: "M", "F", "U" (unknown), or "O" (other)</td>
</tr>
</tbody>
</table>
<h5 id="additional-options">Additional Options<a class="headerlink" href="#additional-options" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>output_filename</code></td>
<td><code>str</code></td>
<td>Auto-generated</td>
<td>Output filename for the NWB file</td>
</tr>
<tr>
<td><code>overwrite</code></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Whether to overwrite existing files</td>
</tr>
<tr>
<td><code>return_nwb_object</code></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Return both filename and NWB object</td>
</tr>
<tr>
<td><code>config_path</code></td>
<td><code>str</code></td>
<td><code>None</code></td>
<td>Path to configuration file (uses default if not specified)</td>
</tr>
</tbody>
</table>
<h2 id="usage-examples">Usage Examples<a class="headerlink" href="#usage-examples" title="Permanent link">&para;</a></h2>
<h3 id="basic-export">Basic Export<a class="headerlink" href="#basic-export" title="Permanent link">&para;</a></h3>
<p>Export a single session with default parameters:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">ethopy.utils.export.nwb</span><span class="w"> </span><span class="kn">import</span> <span class="n">export_to_nwb</span>

<span class="c1"># Basic export with minimal parameters</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">export_to_nwb</span><span class="p">(</span><span class="n">animal_id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">session_id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NWB file saved as: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="export-with-custom-metadata">Export with Custom Metadata<a class="headerlink" href="#export-with-custom-metadata" title="Permanent link">&para;</a></h3>
<p>Include detailed metadata about the experiment:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">filename</span> <span class="o">=</span> <span class="n">export_to_nwb</span><span class="p">(</span>
    <span class="n">animal_id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">session_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">experimenter</span><span class="o">=</span><span class="s2">&quot;Alex Smith&quot;</span><span class="p">,</span>
    <span class="n">lab</span><span class="o">=</span><span class="s2">&quot;Systems Neuroscience Lab&quot;</span><span class="p">,</span>
    <span class="n">institution</span><span class="o">=</span><span class="s2">&quot;FORTH IMBB&quot;</span><span class="p">,</span>
    <span class="n">session_description</span><span class="o">=</span><span class="s2">&quot;2AFC task&quot;</span><span class="p">,</span>
    <span class="n">age</span><span class="o">=</span><span class="s2">&quot;P120D&quot;</span><span class="p">,</span>  <span class="c1"># 120 days old</span>
    <span class="n">subject_description</span><span class="o">=</span><span class="s2">&quot;Wild-type C57BL/6J mouse, head-fixed&quot;</span><span class="p">,</span>
    <span class="n">sex</span><span class="o">=</span><span class="s2">&quot;F&quot;</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="custom-configuration-file">Custom Configuration File<a class="headerlink" href="#custom-configuration-file" title="Permanent link">&para;</a></h3>
<p>Use a custom configuration file for database connection:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">filename</span> <span class="o">=</span> <span class="n">export_to_nwb</span><span class="p">(</span>
    <span class="n">animal_id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">session_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">config_path</span><span class="o">=</span><span class="s2">&quot;/path/to/custom_config.json&quot;</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The configuration file is a JSON file that specifies how to connect to your DataJoint database and which schema names to use for your experiment. You can provide a custom configuration file using the <code>config_path</code> parameter in <code>export_to_nwb</code>. If no <code>config_path</code> is specified, EthoPy will automatically search for the configuration file in the default location (<code>~/.ethopy/local_conf.json</code>).</p>
<p>For detailed information about configuration options and file structure, see the <a href="../local_conf/">Local Configuration Guide</a>.</p>
<h3 id="return-nwb-object-for-further-processing">Return NWB Object for Further Processing<a class="headerlink" href="#return-nwb-object-for-further-processing" title="Permanent link">&para;</a></h3>
<p>Get both the filename and NWB object for additional processing:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">filename</span><span class="p">,</span> <span class="n">nwb_obj</span> <span class="o">=</span> <span class="n">export_to_nwb</span><span class="p">(</span>
    <span class="n">animal_id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">session_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">return_nwb_object</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># Use the NWB object for additional processing</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NWB file contains </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">nwb_obj</span><span class="o">.</span><span class="n">trials</span><span class="p">)</span><span class="si">}</span><span class="s2"> trials&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="batch-export">Batch Export<a class="headerlink" href="#batch-export" title="Permanent link">&para;</a></h3>
<p>Export multiple sessions at once:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">ethopy.utils.export.nwb</span><span class="w"> </span><span class="kn">import</span> <span class="n">batch_export_to_nwb</span>

<span class="c1"># Define sessions to export</span>
<span class="n">animal_session_list</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">124</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">124</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="p">]</span>

<span class="n">exported_files</span> <span class="o">=</span> <span class="n">batch_export_to_nwb</span><span class="p">(</span>
    <span class="n">animal_session_list</span><span class="p">,</span>
    <span class="n">experimenter</span><span class="o">=</span><span class="s2">&quot;Dr. Smith&quot;</span><span class="p">,</span>
    <span class="n">lab</span><span class="o">=</span><span class="s2">&quot;Vision Lab&quot;</span><span class="p">,</span>
    <span class="n">institution</span><span class="o">=</span><span class="s2">&quot;FORTH IMBB&quot;</span><span class="p">,</span>
    <span class="n">output_directory</span><span class="o">=</span><span class="s2">&quot;my_nwb_exports&quot;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully exported </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">exported_files</span><span class="p">)</span><span class="si">}</span><span class="s2"> sessions&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="parameter-guidelines">Parameter Guidelines<a class="headerlink" href="#parameter-guidelines" title="Permanent link">&para;</a></h2>
<h3 id="age-format-iso-8601-duration">Age Format (ISO 8601 Duration)<a class="headerlink" href="#age-format-iso-8601-duration" title="Permanent link">&para;</a></h3>
<p>The age parameter should follow ISO 8601 duration format:</p>
<ul>
<li><code>P90D</code> = 90 days</li>
<li><code>P3M</code> = 3 months</li>
<li><code>P1Y6M</code> = 1 year and 6 months</li>
<li><code>P2Y</code> = 2 years</li>
<li><code>P1Y2M15D</code> = 1 year, 2 months, and 15 days</li>
</ul>
<h3 id="sex-values">Sex Values<a class="headerlink" href="#sex-values" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"M"</code></td>
<td>Male</td>
</tr>
<tr>
<td><code>"F"</code></td>
<td>Female</td>
</tr>
<tr>
<td><code>"U"</code></td>
<td>Unknown</td>
</tr>
<tr>
<td><code>"O"</code></td>
<td>Other</td>
</tr>
</tbody>
</table>
<h2 id="data-included-in-nwb-files">Data Included in NWB Files<a class="headerlink" href="#data-included-in-nwb-files" title="Permanent link">&para;</a></h2>
<p>The export function includes the following data types:</p>
<h3 id="core-data">Core Data<a class="headerlink" href="#core-data" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Trials</strong>: Trial timing, conditions, and metadata</li>
<li><strong>Subject Information</strong>: Animal details (age, species, sex, etc.)</li>
<li><strong>Session Metadata</strong>: Experimenter, lab, institution, timestamps</li>
</ul>
<h3 id="experimental-data">Experimental Data<a class="headerlink" href="#experimental-data" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Conditions</strong>: Experiment, stimulus, and behavior conditions</li>
<li><strong>Activity Data</strong>: Behavioral measurements and responses</li>
<li><strong>Reward Data</strong>: Reward delivery timestamps and amounts</li>
<li><strong>Stimulus Data</strong>: Stimulus parameters and timing</li>
<li><strong>States Data</strong>: Trial state transitions and timing</li>
</ul>
<h3 id="special-features">Special Features<a class="headerlink" href="#special-features" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Compound Stimuli</strong>: Automatically handles multi-component stimuli (e.g., "Tones_Grating")</li>
<li><strong>Fallback Timing</strong>: Robust trial timing extraction with multiple strategies</li>
<li><strong>Data Validation</strong>: Comprehensive error checking and data integrity validation</li>
</ul>
<h2 id="advanced-features">Advanced Features<a class="headerlink" href="#advanced-features" title="Permanent link">&para;</a></h2>
<h3 id="compound-stimulus-support">Compound Stimulus Support<a class="headerlink" href="#compound-stimulus-support" title="Permanent link">&para;</a></h3>
<p>The export function automatically detects and handles compound stimuli (stimuli with multiple components separated by underscores):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># If your session uses compound stimuli like &quot;Tones_Grating&quot;</span>
<span class="c1"># The export will automatically:</span>
<span class="c1"># 1. Detect the compound stimulus</span>
<span class="c1"># 2. Split it into components (&quot;Tones&quot; and &quot;Grating&quot;)</span>
<span class="c1"># 3. Validate all components exist in the database</span>
<span class="c1"># 4. Export each component separately</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">export_to_nwb</span><span class="p">(</span><span class="n">animal_id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">session_id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="robust-trial-timing">Robust Trial Timing<a class="headerlink" href="#robust-trial-timing" title="Permanent link">&para;</a></h3>
<p>The system uses multiple strategies to extract trial timing:</p>
<ol>
<li><strong>Primary Strategy</strong>: Uses PreTrial and InterTrial states when available</li>
<li><strong>Fallback Strategy</strong>: Uses first and last available states for trials missing standard timing</li>
<li><strong>Comprehensive Logging</strong>: Detailed information about timing extraction for each trial</li>
</ol>
<h3 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h3>
<p>The export function provides detailed error messages and logging:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">export_to_nwb</span><span class="p">(</span><span class="n">animal_id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">session_id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid session: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileExistsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File already exists: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Export failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="output-file-structure">Output File Structure<a class="headerlink" href="#output-file-structure" title="Permanent link">&para;</a></h2>
<p>The generated NWB file contains:</p>
<h3 id="processing-modules">Processing Modules<a class="headerlink" href="#processing-modules" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Conditions</strong>: Experiment, behavior, and stimulus condition parameters</li>
<li><strong>Activity data</strong>: Custom behavioral metadata tables</li>
<li><strong>Reward</strong>: Reward delivery time series data</li>
<li><strong>States</strong>: Trial state transition timestamps</li>
</ul>
<h3 id="core-nwb-components">Core NWB Components<a class="headerlink" href="#core-nwb-components" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Trials table</strong>: Trial-by-trial data with timing and conditions</li>
<li><strong>Subject</strong>: Animal information and metadata</li>
<li><strong>Stimulus tables</strong>: Stimulus parameters and presentation timing</li>
</ul>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="common-issues">Common Issues<a class="headerlink" href="#common-issues" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>"No session found" error</strong></li>
<li>Verify animal_id and session_id exist in your database</li>
<li>
<p>Check database connection in your configuration file</p>
</li>
<li>
<p><strong>"File already exists" error</strong></p>
</li>
<li>
<p>Use <code>overwrite=True</code> parameter or choose a different filename</p>
</li>
<li>
<p><strong>Missing data warnings</strong></p>
</li>
<li>Some warnings are normal (e.g., missing reward data for non-reward sessions)</li>
<li>
<p>Check logs for specific missing components</p>
</li>
<li>
<p><strong>Configuration errors</strong></p>
</li>
<li>Verify your <code>local_conf.json</code> file has correct database credentials</li>
<li>Use <code>config_path</code> parameter to specify custom configuration</li>
</ol>
<h3 id="data-validation">Data Validation<a class="headerlink" href="#data-validation" title="Permanent link">&para;</a></h3>
<p>The export function performs extensive validation:
- Checks for session existence
- Validates stimulus components for compound stimuli
- Verifies trial timing data consistency
- Reports missing or incomplete data with detailed logging</p>
<h3 id="performance-notes">Performance Notes<a class="headerlink" href="#performance-notes" title="Permanent link">&para;</a></h3>
<ul>
<li>Large sessions may take several minutes to export</li>
<li>The function uses efficient DataJoint queries to minimize memory usage</li>
<li>Progress is logged throughout the export process</li>
</ul>
<h2 id="related-functions">Related Functions<a class="headerlink" href="#related-functions" title="Permanent link">&para;</a></h2>
<ul>
<li><code>batch_export_to_nwb()</code>: Export multiple sessions efficiently</li>
<li><code>setup_datajoint_connection()</code>: Set up database connections with custom configurations</li>
<li><code>create_nwb_file()</code>: Create base NWB file structure (internal function)</li>
</ul>
<p>For more details about the underlying data structures and database schema, see the main EthoPy documentation.</p>












                

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "search.highlight", "search.share", "search.suggest", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>